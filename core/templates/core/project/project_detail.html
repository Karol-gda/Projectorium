{% extends "base.html" %}

{% block title %}Szczegóły projektu: {{ project.title }}{% endblock %}

{% block content %}
    <h1>{{ project.title }}</h1>

    <p><strong>Nr wewnętrzny:</strong> {{ project.internal_number }}</p>
    <p><strong>Opis:</strong> {{ project.description }}</p>
    <p><strong>Status:</strong> {% if project.is_active %}Aktywny{% else %}Zakończony{% endif %}</p>
    <p><strong>Jednostka wiodąca:</strong> {{ project.project_leader }}</p>
    <p><strong>Data rozpoczęcia:</strong> {{ project.start_date|date:"d.m.Y" }}</p>
    <p><strong>Data zakończenia:</strong> {{ project.end_date|date:"d.m.Y" }}</p>
    <p><strong>Dni do końca:</strong> {{ days_remaining }} dni</p>

    <hr>

    <h2>Członkowie zespołu</h2>
    <ul>
        {% for member in members %}
            <li>{{ member.user.get_full_name }}</li>
        {% empty %}
            <li>Brak członków</li>
        {% endfor %}
    </ul>

    <hr>

    <h2>Etapy projektu</h2>
    <ul>
        {% for milestone in milestones %}
            <li>{{ milestone.title }} — termin: {{ milestone.due_date }}</li>
        {% empty %}
            <li>Brak zdefiniowanych etapów</li>
        {% endfor %}
    </ul>

    <hr>

    <h2>Dokumenty</h2>
    <ul>
        {% for doc in documents %}
            <li>{{ doc.name }} (dodano: {{ doc.uploaded_at }})</li>
        {% empty %}
            <li>Brak dokumentów</li>
        {% endfor %}
    </ul>

    <hr>

    <h2>Budżet</h2>
    <p><strong>Całkowity:</strong> {{ project.budget_total }} zł</p>
    <p><strong>Wykorzystany:</strong> {{ budget_used }} zł</p>

    <hr>

    <h2>Historia zmian</h2>
    <ul>
        {% for change in changelog %}
            <li>{{ change.timestamp }} — {{ change.description }}</li>
        {% empty %}
            <li>Brak zmian</li>
        {% endfor %}
    </ul>
{% endblock %}
